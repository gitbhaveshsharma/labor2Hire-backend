{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://yourdomain.com/schemas/auth-screen.json",
  "title": "Authentication & OTP Verification Screen Configuration Schema",
  "description": "Defines configuration for authentication and OTP verification screens with dynamic layouts and data binding",
  "type": "object",
  "required": ["screenType", "components"],
  "additionalProperties": false,

  "properties": {
    "screenType": {
      "type": "string",
      "enum": ["Auth", "AuthPhone", "OTPVerification", "MultiStepAuth"],
      "description": "The purpose/type of this screen"
    },

    "metadata": {
      "type": "object",
      "description": "Informational metadata about this screen version",
      "properties": {
        "screenTitle": { "type": "string" },
        "description": { "type": "string" },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
          "description": "Semantic versioning format: MAJOR.MINOR.PATCH"
        },
        "lastUpdated": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp"
        }
      },
      "additionalProperties": false
    },

    "globalStyles": {
      "type": "object",
      "description": "Global styling applied to the entire screen",
      "properties": {
        "backgroundColor": { "type": "string" },
        "statusBar": {
          "type": "object",
          "properties": {
            "barStyle": { "type": "string", "enum": ["default", "light-content", "dark-content"] },
            "backgroundColor": { "type": "string" }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": true
    },

    "components": {
      "type": "array",
      "minItems": 1,
      "description": "Dynamic UI component tree for the screen",
      "items": { "$ref": "#/definitions/Component" }
    },

    "loadingState": {
      "$ref": "#/definitions/Component",
      "description": "UI layout while data or network requests are pending"
    },

    "errorState": {
      "$ref": "#/definitions/Component",
      "description": "UI layout for failure/error states"
    },

    "otpConfig": {
      "type": "object",
      "description": "Optional OTP verification-specific configuration",
      "properties": {
        "otpLength": { "type": "integer", "minimum": 4, "maximum": 8 },
        "otpType": { "type": "string", "enum": ["numeric", "alphanumeric"] },
        "autoSubmit": { "type": "boolean", "default": false },
        "resendLimit": { "type": "integer", "minimum": 0 },
        "resendTimeoutSeconds": { "type": "integer", "minimum": 0 },
        "maxAttempts": { "type": "integer", "minimum": 1 },
        "attemptWindowSeconds": { "type": "integer", "minimum": 1 },
        "allowPaste": { "type": "boolean" }
      },
      "additionalProperties": false
    }
  },

  "definitions": {
    "Component": {
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "View", "Text", "TouchableOpacity", "Image", "ImageBackground", "ScrollView", "SafeAreaView",
            "StatusBar", "ActivityIndicator", "TextInput", "FlatList", "Modal", "Switch", "Slider",
            "Picker", "Button", "Pressable", "KeyboardAvoidingView", "LinearGradient", "Icon", "OtpInput"
          ],
          "description": "React Native component type"
        },
        "id": { "type": "string" },
        "props": { "$ref": "#/definitions/ComponentProps" },
        "style": { "$ref": "#/definitions/Style" },
        "children": {
          "type": "array",
          "items": { "$ref": "#/definitions/Component" }
        },
        "actions": { "$ref": "#/definitions/Actions" },
        "conditions": { "$ref": "#/definitions/Conditions" },
        "data": {
          "type": "object",
          "properties": {
            "source": { "type": "string" },
            "mapping": { "type": "object" }
          },
          "additionalProperties": false
        },
        "state": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },

    "ComponentProps": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "text": { "type": "string" },
        "source": {
          "oneOf": [
            { "type": "object", "properties": { "uri": { "type": "string" } }, "additionalProperties": false },
            { "type": "number" }
          ]
        },
        "placeholder": { "type": "string" },
        "value": { "type": ["string", "number", "boolean"] },
        "keyboardType": { "type": "string", "enum": ["default", "numeric", "email-address", "phone-pad"] },
        "secureTextEntry": { "type": "boolean" },
        "maxLength": { "type": "integer" },
        "resizeMode": { "type": "string", "enum": ["cover", "contain", "stretch", "repeat", "center"] },
        "name": { "type": "string" },
        "iconFamily": { "type": "string" },
        "iconSize": { "type": "number" },
        "iconColor": { "type": "string" },
        "placeholderTextColor": { "type": "string" },
        "otpLength": { "type": "integer" }
      }
    },

    "Style": {
      "type": "object",
      "description": "React Native style object",
      "additionalProperties": true
    },

    "Actions": {
      "type": "object",
      "additionalProperties": { "$ref": "#/definitions/Action" }
    },

    "Action": {
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "navigate", "dispatch", "openModal", "closeModal", "showAlert", "makeApiCall",
            "updateState", "executeScript", "openUrl", "retryLoad", "login", "requestOtp",
            "OTPVerification", "resendOtp", "retryPhoneAuth"
          ]
        },
        "payload": { "type": "object", "additionalProperties": true },
        "condition": { "$ref": "#/definitions/Condition" },
        "debounce": { "type": "number" }
      },
      "additionalProperties": false
    },

    "Conditions": {
      "type": "object",
      "properties": {
        "show": { "$ref": "#/definitions/Condition" },
        "hide": { "$ref": "#/definitions/Condition" },
        "enable": { "$ref": "#/definitions/Condition" },
        "disable": { "$ref": "#/definitions/Condition" }
      },
      "additionalProperties": false
    },

    "Condition": {
      "type": "object",
      "required": ["operator"],
      "properties": {
        "operator": {
          "type": "string",
          "enum": ["equals", "notEquals", "greaterThan", "lessThan", "contains", "exists", "and", "or", "not"]
        },
        "field": { "type": "string" },
        "value": {},
        "conditions": { "type": "array", "items": { "$ref": "#/definitions/Condition" } }
      },
      "additionalProperties": false
    }
  }
}
