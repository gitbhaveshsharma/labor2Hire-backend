{
  "screenType": "OTPVerification",
  "metadata": {
    "screenTitle": "OTP Verification",
    "description": "Screen for entering and verifying the OTP code sent to the user's mobile number with consistent styling",
    "version": "{{VERSION}}",
    "lastUpdated": "{{TIMESTAMP}}"
  },
  "globalStyles": {
    "backgroundColor": "#ffffff",
    "statusBar": {
      "barStyle": "dark-content",
      "backgroundColor": "#ffffff"
    }
  },
  "components": [
    {
      "type": "SafeAreaView",
      "style": {
        "flex": 1,
        "backgroundColor": "#ffffff",
        "justifyContent": "space-around"
      },
      "children": [
        {
          "type": "View",
          "style": {
            "paddingTop": 24
          },
          "children": [
            {
              "type": "View",
              "style": {
                "alignItems": "center",
                "width": "100%",
                "height": "30%",
                "justifyContent": "center",
                "marginTop": 30
              },
              "children": [
                {
                  "type": "Text",
                  "props": { "text": "Enter Your" },
                  "style": {
                    "fontSize": 50,
                    "color": "#000000",
                    "fontWeight": "600",
                    "letterSpacing": 0.2
                  }
                },
                {
                  "type": "Text",
                  "props": { "text": "OTP Code" },
                  "style": {
                    "fontSize": 60,
                    "fontWeight": "bold",
                    "color": "#000000",
                    "letterSpacing": 0.2
                  }
                }
              ]
            },
            {
              "type": "View",
              "style": {
                "width": "80%",
                "alignSelf": "center"
              },
              "children": [
                {
                  "type": "View",
                  "style": {
                    "borderWidth": 2,
                    "borderColor": "#0a7aff",
                    "backgroundColor": "#f0f6ff",
                    "borderRadius": 12,
                    "paddingHorizontal": 16,
                    "paddingVertical": 12,
                    "marginBottom": 14,
                    "alignItems": "center"
                  },
                  "children": [
                    {
                      "type": "OtpInput",
                      "props": {
                        "otpLength": 6,
                        "keyboardType": "numeric",
                        "placeholderTextColor": "#4C4A4A",
                        "autoFocus": true
                      },
                      "style": {
                        "height": 52,
                        "fontSize": 24,
                        "color": "#000000",
                        "letterSpacing": 6
                      },
                      "state": { "value": "auth.otpCode" }
                    }
                  ]
                },
                {
                  "type": "TouchableOpacity",
                  "style": {
                    "backgroundColor": "#0a7aff",
                    "borderRadius": 12,
                    "paddingVertical": 16,
                    "alignItems": "center",
                    "justifyContent": "center"
                  },
                  "actions": {
                    "onPress": {
                      "type": "verifyOtp",
                      "payload": {
                        "phone": "{{state.auth.phoneNumber}}",
                        "otp": "{{state.auth.otpCode}}",
                        "navigateTo": "Home"
                      }
                    }
                  },
                  "children": [
                    {
                      "type": "View",
                      "style": {
                        "flexDirection": "row",
                        "alignItems": "center",
                        "justifyContent": "center"
                      },
                      "children": [
                        {
                          "type": "Text",
                          "props": { "text": "VERIFY" },
                          "style": {
                            "color": "#ffffff",
                            "fontSize": 20,
                            "fontWeight": "600",
                            "letterSpacing": 0.9,
                            "marginRight": 8
                          }
                        },
                        {
                          "type": "Icon",
                          "props": {
                            "name": "check-circle",
                            "type": "MaterialIcons",
                            "iconSize": 20,
                            "iconColor": "#ffffff"
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "TouchableOpacity",
                  "style": {
                    "marginTop": 12,
                    "alignItems": "center"
                  },
                  "actions": {
                    "onPress": {
                      "type": "resendOtp",
                      "payload": {
                        "phone": "{{state.auth.phoneNumber}}"
                      }
                    }
                  },
                  "children": [
                    {
                      "type": "Text",
                      "props": { "text": "Resend OTP" },
                      "style": {
                        "color": "#0a7aff",
                        "fontSize": 16,
                        "fontWeight": "500"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "View",
              "style": {
                "width": "100%",
                "height": "50%",
                "position": "relative",
                "marginTop": 10
              },
              "children": [
                {
                  "type": "ImageBackground",
                  "props": {
                    "source": {
                      "uri": "https://wbtgxaqaqispcvvtvwsx.supabase.co/storage/v1/object/public/L2H/onboarding-screen/otp-screen.png"
                    },
                    "resizeMode": "cover"
                  },
                  "style": {
                    "width": "100%",
                    "height": "100%",
                    "position": "relative"
                  },
                  "children": [
                    {
                      "type": "View",
                      "style": {
                        "position": "absolute",
                        "top": 0,
                        "left": 0,
                        "width": "100%",
                        "height": "100%"
                      },
                      "children": [
                        {
                          "type": "LinearGradient",
                          "props": {
                            "colors": [
                              "rgba(255,255,255,1)",
                              "rgba(255,255,255,0)"
                            ],
                            "start": { "x": 0, "y": 0 },
                            "end": { "x": 0, "y": 0.55 }
                          },
                          "style": { "flex": 1 }
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "loadingState": {
    "type": "SafeAreaView",
    "style": {
      "flex": 1,
      "justifyContent": "center",
      "alignItems": "center",
      "backgroundColor": "#ffffff"
    },
    "children": [
      {
        "type": "ActivityIndicator",
        "props": { "size": "large", "color": "#0a7aff" },
        "style": { "marginBottom": 14 }
      },
      {
        "type": "Text",
        "props": { "text": "Verifying OTP..." },
        "style": { "fontSize": 16, "color": "#333333", "fontWeight": "500" }
      }
    ]
  },
  "errorState": {
    "type": "SafeAreaView",
    "style": {
      "flex": 1,
      "justifyContent": "center",
      "alignItems": "center",
      "backgroundColor": "#ffffff",
      "padding": 20
    },
    "children": [
      {
        "type": "Text",
        "props": { "text": "‚ùå" },
        "style": { "fontSize": 44, "marginBottom": 10 }
      },
      {
        "type": "Text",
        "props": { "text": "OTP Verification Failed" },
        "style": { "fontSize": 18, "fontWeight": "700", "color": "#ff3333", "marginBottom": 6 }
      },
      {
        "type": "Text",
        "props": { "text": "The code you entered is invalid or expired. Please try again." },
        "style": { "fontSize": 14, "color": "#666666", "textAlign": "center", "lineHeight": 20, "marginBottom": 18 }
      },
      {
        "type": "TouchableOpacity",
        "style": {
          "backgroundColor": "#0a7aff",
          "paddingHorizontal": 22,
          "paddingVertical": 10,
          "borderRadius": 10
        },
        "actions": {
          "onPress": {
            "type": "retryOtpVerification",
            "payload": { "message": "Retrying verification..." }
          }
        },
        "children": [
          {
            "type": "Text",
            "props": { "text": "Try Again" },
            "style": { "color": "#ffffff", "fontSize": 16, "fontWeight": "700" }
          }
        ]
      }
    ]
  }
}
